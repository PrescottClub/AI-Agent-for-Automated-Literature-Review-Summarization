# Tsearch 项目优化计划

基于详细分析报告的项目优化实施计划

## 📋 已完成的优化

### ✅ 第一阶段：核心架构优化

1. **依赖管理一致性修复**
   - ✅ 修改 Dockerfile 使用 pyproject.toml 而非 requirements.txt
   - ✅ 移除对冗余 setup.py 的依赖（保留 scripts/setup.py 作为安装脚本）

2. **Docker 配置优化**
   - ✅ 固定 ChromaDB 镜像版本：chromadb/chroma:0.4.20
   - ✅ 固定 Prometheus 镜像版本：prom/prometheus:v2.48.0
   - ✅ 固定 Grafana 镜像版本：grafana/grafana:10.2.0
   - ✅ 参数化 Uvicorn worker 数量：${UVICORN_WORKERS:-1}
   - ✅ 参数化 Redis 内存配置：${REDIS_MAXMEMORY:-256mb}
   - ✅ 增强 Grafana 密码安全：${GRAFANA_ADMIN_PASSWORD:-TsearchAdmin2024!}
   - ✅ 参数化基础配置：LOG_LEVEL, DEBUG, LLM_PROVIDER

## 🎯 待实施的优化

### 第二阶段：项目结构精简

根据分析报告建议，以下模块可能不属于核心功能，建议评估是否精简：

#### 高级 AI 分析功能
- **trend_analyzer.py**: 趋势洞察功能
  - 状态：保留但标记为增强功能
  - 理由：虽然有价值，但不是文献综述的核心功能

#### 多余的交互界面
- **app.py (Streamlit)**: 与 Vue3 前端功能重合
  - 状态：保留作为开发/演示工具
  - 理由：可用于快速原型验证和内部测试

- **mcp_server.py**: MCP 服务支持
  - 状态：保留但标记为可选功能
  - 理由：为特定开发者工具链提供支持

### 第三阶段：配置管理改进

#### 统一配置系统
- [ ] 创建更完善的配置管理
- [ ] 确保所有敏感信息通过环境变量管理
- [ ] 建立配置验证机制

#### 错误处理增强
- [ ] 完善异常处理机制
- [ ] 改进日志系统
- [ ] 增强错误恢复能力

### 第四阶段：生产环境优化

#### 性能优化
- [ ] 优化 LLM 交互的错误处理和成本控制
- [ ] 实现更细致的缓存策略
- [ ] 优化异步任务编排

#### 安全增强
- [ ] 实施更严格的输入验证
- [ ] 增强 API 安全措施
- [ ] 完善访问控制机制

## 🔧 实施建议

### 核心功能聚焦原则
1. **保持核心路径清晰**：用户从输入查询到获取综述报告
2. **延迟非核心功能**：将高级分析功能标记为增强特性
3. **简化部署复杂度**：优先保证核心功能的稳定运行

### 模块评估标准
- **核心性**：是否直接参与文献检索和摘要生成
- **复杂度**：实现和维护的复杂程度
- **用户价值**：对最终用户的直接价值
- **依赖关系**：与其他模块的耦合程度

## 📊 优化效果预期

### 架构改进
- ✅ 依赖管理一致性提升
- ✅ 容器化部署稳定性增强
- ✅ 配置灵活性改善

### 待实现效果
- [ ] 项目结构更清晰
- [ ] 维护成本降低
- [ ] 核心功能更稳定
- [ ] 部署流程简化

## 🚀 下一步行动

1. **立即执行**：完成配置管理系统改进
2. **短期规划**：评估和标记非核心功能模块
3. **中期目标**：实施错误处理和性能优化
4. **长期愿景**：建立完善的生产环境支持

---

*此优化计划基于项目分析报告制定，旨在提升 Tsearch 项目的工程质量和可维护性。*
