<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI æ™ºèƒ½æ–‡çŒ®ç»¼è¿°ç³»ç»Ÿ</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/element-plus/dist/index.full.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/element-plus/dist/index.css">
    <script src="https://unpkg.com/@element-plus/icons-vue/dist/index.iife.min.js"></script>
    <style>
        body {
            margin: 0;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .title {
            font-size: 2.5rem;
            font-weight: bold;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #6b7280;
            font-size: 1.2rem;
        }
        
        .search-card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
            margin-bottom: 30px;
        }
        
        .results-card {
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
            margin-bottom: 20px;
        }
        
        .paper-item {
            border-bottom: 1px solid #e5e7eb;
            padding: 20px 0;
        }
        
        .paper-item:last-child {
            border-bottom: none;
        }
        
        .paper-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 10px;
        }
        
        .paper-authors {
            color: #6b7280;
            margin-bottom: 10px;
        }
        
        .paper-summary {
            color: #374151;
            line-height: 1.6;
            margin-bottom: 10px;
        }
        
        .paper-meta {
            display: flex;
            gap: 15px;
            font-size: 0.9rem;
            color: #6b7280;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 4px rgb(0 0 0 / 0.1);
        }
        
        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: #3b82f6;
        }
        
        .stat-label {
            color: #6b7280;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="container">
            <!-- å¤´éƒ¨ -->
            <div class="header">
                <h1 class="title">ğŸ”¬ AI æ™ºèƒ½æ–‡çŒ®ç»¼è¿°ç³»ç»Ÿ</h1>
                <p class="subtitle">åŸºäºäººå·¥æ™ºèƒ½çš„æ™ºèƒ½æ–‡çŒ®æ£€ç´¢ã€åˆ†æä¸æ€»ç»“æœåŠ¡</p>
            </div>
            
            <!-- æœç´¢åŒºåŸŸ -->
            <div class="search-card">
                <h3 style="margin-bottom: 20px; color: #1f2937;">å¼€å§‹æ‚¨çš„æ–‡çŒ®ç»¼è¿°</h3>
                
                <el-form @submit.prevent="startSearch">
                    <el-form-item label="ç ”ç©¶ä¸»é¢˜">
                        <el-input 
                            v-model="searchQuery" 
                            placeholder="è¯·è¾“å…¥æ‚¨çš„ç ”ç©¶ä¸»é¢˜ï¼Œä¾‹å¦‚ï¼šäººå·¥æ™ºèƒ½åœ¨åŒ»ç–—é¢†åŸŸçš„åº”ç”¨"
                            size="large"
                            style="width: 100%;">
                            <template #prefix>
                                <el-icon><Search /></el-icon>
                            </template>
                        </el-input>
                    </el-form-item>
                    
                    <el-row :gutter="20">
                        <el-col :span="6">
                            <el-form-item label="æ•°æ®æº">
                                <el-select v-model="selectedSources" multiple placeholder="é€‰æ‹©æ•°æ®æº" style="width: 100%;">
                                    <el-option label="arXiv" value="arxiv" />
                                    <el-option label="Semantic Scholar" value="semantic_scholar" />
                                </el-select>
                            </el-form-item>
                        </el-col>
                        <el-col :span="6">
                            <el-form-item label="è®ºæ–‡æ•°é‡">
                                <el-input-number v-model="maxPapers" :min="5" :max="50" style="width: 100%;" />
                            </el-form-item>
                        </el-col>
                        <el-col :span="6">
                            <el-form-item label="è·å–å…¨æ–‡">
                                <el-switch v-model="retrieveFullText" />
                            </el-form-item>
                        </el-col>
                        <el-col :span="6">
                            <el-form-item label="AI åˆ†æ">
                                <el-switch v-model="enableAIAnalysis" />
                            </el-form-item>
                        </el-col>
                    </el-row>
                    
                    <div style="text-align: center; margin-top: 20px;">
                        <el-button 
                            type="primary" 
                            size="large" 
                            :loading="isSearching"
                            @click="startSearch"
                            style="padding: 12px 40px; font-size: 16px;">
                            <el-icon style="margin-right: 8px;"><Search /></el-icon>
                            {{ isSearching ? 'æ­£åœ¨æ£€ç´¢...' : 'å¼€å§‹æ£€ç´¢' }}
                        </el-button>
                    </div>
                </el-form>
            </div>
            
            <!-- ç»Ÿè®¡ä¿¡æ¯ -->
            <div v-if="searchResults.length > 0" class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number">{{ searchResults.length }}</div>
                    <div class="stat-label">æ£€ç´¢åˆ°çš„è®ºæ–‡</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">{{ fullTextCount }}</div>
                    <div class="stat-label">è·å–å…¨æ–‡</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">{{ totalKeywords }}</div>
                    <div class="stat-label">å…³é”®è¯æ€»æ•°</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">{{ uniqueSources }}</div>
                    <div class="stat-label">æ•°æ®æº</div>
                </div>
            </div>
            
            <!-- åŠ è½½çŠ¶æ€ -->
            <div v-if="isSearching" class="loading">
                <el-icon class="is-loading" style="font-size: 2rem; color: #3b82f6;"><Loading /></el-icon>
                <p style="margin-top: 10px; color: #6b7280;">æ­£åœ¨æ£€ç´¢æ–‡çŒ®ï¼Œè¯·ç¨å€™...</p>
            </div>
            
            <!-- æœç´¢ç»“æœ -->
            <div v-if="searchResults.length > 0 && !isSearching">
                <h3 style="margin-bottom: 20px; color: #1f2937;">æ£€ç´¢ç»“æœ ({{ searchResults.length }} ç¯‡)</h3>
                
                <div class="results-card" v-for="(paper, index) in searchResults" :key="index">
                    <div class="paper-item">
                        <div style="display: flex; justify-content: space-between; align-items: start;">
                            <div style="flex: 1;">
                                <h4 class="paper-title">{{ paper.title }}</h4>
                                <div class="paper-authors">
                                    <el-icon style="margin-right: 5px;"><User /></el-icon>
                                    {{ formatAuthors(paper.authors) }}
                                </div>
                                <div class="paper-summary">{{ paper.summary }}</div>
                                <div class="paper-meta">
                                    <span>
                                        <el-icon><Calendar /></el-icon>
                                        {{ formatDate(paper.publishedDate) }}
                                    </span>
                                    <span>
                                        <el-icon><DataBoard /></el-icon>
                                        {{ paper.source.toUpperCase() }}
                                    </span>
                                    <span v-if="paper.fullTextRetrieved">
                                        <el-icon style="color: #10b981;"><CircleCheck /></el-icon>
                                        å…¨æ–‡å·²è·å–
                                    </span>
                                </div>
                                <div v-if="paper.keywords && paper.keywords.length > 0" style="margin-top: 10px;">
                                    <el-tag 
                                        v-for="keyword in paper.keywords.slice(0, 5)" 
                                        :key="keyword"
                                        size="small"
                                        style="margin-right: 8px; margin-bottom: 5px;">
                                        {{ keyword }}
                                    </el-tag>
                                </div>
                            </div>
                            <div style="margin-left: 20px;">
                                <el-tag type="info" size="large">#{{ index + 1 }}</el-tag>
                            </div>
                        </div>
                        <div style="margin-top: 15px;">
                            <el-button v-if="paper.url" type="primary" size="small" @click="openLink(paper.url)">
                                æŸ¥çœ‹åŸæ–‡
                            </el-button>
                            <el-button v-if="paper.pdfUrl" type="success" size="small" @click="openLink(paper.pdfUrl)">
                                ä¸‹è½½PDF
                            </el-button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ç©ºçŠ¶æ€ -->
            <div v-if="!isSearching && hasSearched && searchResults.length === 0" style="text-align: center; padding: 60px;">
                <el-icon style="font-size: 4rem; color: #d1d5db; margin-bottom: 20px;"><DocumentRemove /></el-icon>
                <h3 style="color: #6b7280; margin-bottom: 10px;">æœªæ‰¾åˆ°ç›¸å…³æ–‡çŒ®</h3>
                <p style="color: #9ca3af;">è¯·å°è¯•è°ƒæ•´æœç´¢å…³é”®è¯æˆ–æ‰©å¤§æœç´¢èŒƒå›´</p>
            </div>
        </div>
    </div>

    <script>
        const { createApp } = Vue;
        const { ElMessage } = ElementPlus;
        
        const app = createApp({
            data() {
                return {
                    searchQuery: '',
                    selectedSources: ['arxiv', 'semantic_scholar'],
                    maxPapers: 20,
                    retrieveFullText: false,
                    enableAIAnalysis: true,
                    isSearching: false,
                    hasSearched: false,
                    searchResults: []
                }
            },
            computed: {
                fullTextCount() {
                    return this.searchResults.filter(paper => paper.fullTextRetrieved).length;
                },
                totalKeywords() {
                    return this.searchResults.reduce((total, paper) => total + (paper.keywords?.length || 0), 0);
                },
                uniqueSources() {
                    return new Set(this.searchResults.map(paper => paper.source)).size;
                }
            },
            methods: {
                async startSearch() {
                    if (!this.searchQuery.trim()) {
                        ElMessage.warning('è¯·è¾“å…¥æœç´¢å…³é”®è¯');
                        return;
                    }

                    this.isSearching = true;
                    this.hasSearched = true;

                    try {
                        const searchParams = {
                            query: this.searchQuery,
                            sources: this.selectedSources,
                            maxPapers: this.maxPapers,
                            retrieveFullText: this.retrieveFullText,
                            enableAIAnalysis: this.enableAIAnalysis
                        };

                        const response = await fetch('http://localhost:8000/api/search', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify(searchParams)
                        });

                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }

                        const result = await response.json();
                        this.searchResults = result.papers || [];

                        ElMessage.success(`æˆåŠŸæ£€ç´¢åˆ° ${this.searchResults.length} ç¯‡ç›¸å…³æ–‡çŒ®`);
                    } catch (error) {
                        console.error('Search error:', error);
                        ElMessage.error('æ£€ç´¢å¤±è´¥ï¼Œåç«¯æœåŠ¡å™¨å¯èƒ½æœªåœ¨è¿è¡Œã€‚å·²åˆ‡æ¢åˆ°æ¼”ç¤ºæ¨¡å¼å¹¶åŠ è½½ç¤ºä¾‹æ•°æ®ã€‚');
                        
                        // ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®
                        this.searchResults = [
                            {
                                title: `äººå·¥æ™ºèƒ½åœ¨${this.searchQuery}é¢†åŸŸçš„åº”ç”¨ç ”ç©¶`,
                                authors: ['å¼ ä¸‰', 'æå››', 'ç‹äº”'],
                                publishedDate: '2024-01-15',
                                source: 'arxiv',
                                summary: `æœ¬æ–‡æ·±å…¥ç ”ç©¶äº†äººå·¥æ™ºèƒ½æŠ€æœ¯åœ¨${this.searchQuery}é¢†åŸŸçš„æœ€æ–°åº”ç”¨ï¼ŒåŒ…æ‹¬æœºå™¨å­¦ä¹ ã€æ·±åº¦å­¦ä¹ å’Œè‡ªç„¶è¯­è¨€å¤„ç†ç­‰å‰æ²¿æŠ€æœ¯çš„å®é™…åº”ç”¨æ¡ˆä¾‹ã€‚`,
                                keywords: ['äººå·¥æ™ºèƒ½', 'æœºå™¨å­¦ä¹ ', 'æ·±åº¦å­¦ä¹ ', this.searchQuery],
                                url: 'https://arxiv.org/abs/2401.12345',
                                fullTextRetrieved: true
                            },
                            {
                                title: `${this.searchQuery}ä¸­çš„æœºå™¨å­¦ä¹ æ–¹æ³•ç»¼è¿°`,
                                authors: ['èµµå…­', 'é’±ä¸ƒ'],
                                publishedDate: '2023-12-20',
                                source: 'semantic_scholar',
                                summary: `æœ¬ç»¼è¿°åˆ†æäº†${this.searchQuery}é¢†åŸŸä¸­æœºå™¨å­¦ä¹ æ–¹æ³•çš„å‘å±•ç°çŠ¶ã€ä¸»è¦æŒ‘æˆ˜å’Œæœªæ¥è¶‹åŠ¿ï¼Œä¸ºç›¸å…³ç ”ç©¶æä¾›äº†é‡è¦å‚è€ƒã€‚`,
                                keywords: ['æœºå™¨å­¦ä¹ ', 'æ•°æ®åˆ†æ', 'ç®—æ³•ä¼˜åŒ–'],
                                url: 'https://example.com/paper2',
                                fullTextRetrieved: false
                            }
                        ];
                    } finally {
                        this.isSearching = false;
                    }
                },
                
                formatAuthors(authors) {
                    if (!authors || authors.length === 0) return 'æœªçŸ¥ä½œè€…';
                    if (authors.length <= 3) return authors.join(', ');
                    return `${authors.slice(0, 3).join(', ')} ç­‰`;
                },
                
                formatDate(dateString) {
                    if (!dateString) return 'æœªçŸ¥æ—¥æœŸ';
                    try {
                        const date = new Date(dateString);
                        return date.toLocaleDateString('zh-CN');
                    } catch {
                        return dateString;
                    }
                },
                
                openLink(url) {
                    window.open(url, '_blank');
                }
            }
        });
        
        // æ³¨å†Œå›¾æ ‡
        for (const [key, component] of Object.entries(ElementPlusIconsVue)) {
            app.component(key, component);
        }
        
        app.use(ElementPlus).mount('#app');
    </script>
</body>
</html> 